<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="global.sesoc.teamBOB4.dao.PostMapper">

	<select id="getAll" parameterType="int" resultType="Post">
	select * 
	from Post
	Where cust_number= #{cust_number}
	
	
	</select>
	<select id="listAll" resultType="map">
	select * from post 
	where 
		<choose>
			<when test="searchItem == 'title'">mus_title</when>
			<when test="searchItem == 'content'">post_content</when>
			<when test="searchItem == 'writer'">post_nickname</when>
		</choose>
	like '%'||#{searchWord}||'%'
	order by post_number desc
	</select>
	

	<insert id="post_save_method" parameterType="Post">
		insert into Post
		(
		post_number
		,mus_number
		,cust_number
		,mus_title
		,post_content
		,post_date
		,post_nickname
		,post_reply
		,post_like
		,post_play
		,post_original
		,post_saved
		)
		values
		(
		SEQ_Post_post_number.nextval
		,#{mus_number}
		,#{cust_number}
		,#{mus_title}
		,#{post_content}
		,sysdate
		,#{post_nickname}
		,0
		,0
		,0
		,#{post_original}
		,#{post_saved}
		)
	
	</insert>
	<select id="getOneByMus_number" parameterType="Post" resultType="int">
	select post_number
	from Post
	where mus_number = #{mus_number}
	<if test="post_content!=null">
	and post_content = #{post_content}
	</if>
	</select>
	
	<select id="getPostAll"  resultType="Post">
	select * from post
	order by post_number desc
	
	</select>
	<select id="getPostByPostNum" parameterType="int" resultType="Post">
	select *
	from Post
	where post_number = #{post_number}
	</select>
</mapper>